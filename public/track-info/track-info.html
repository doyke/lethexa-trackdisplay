<div class="panel panel-default panel-info" style="margin: 0;"> 
    <div class="panel-heading">
        <toggle-btn enabled="panelVisible"></toggle-btn>
        <span ng-show="!selected">Trackinfo</span>

        &nbsp;<a href="#" data-toggle="tooltip" title="{{countryName}}"><img src="/flags/blank.png" class="{{getFlagClass(selected.country)}}" alt="{{selected.country}}" /></a>
        &nbsp; {{selected.name}} 
        &nbsp; {{selected.trackId}}
        <script>
            $(document).ready(function () {
                $('[data-toggle="tooltip"]').tooltip();
            });
        </script>
    </div>
    <div ng-show="panelVisible && selected" ng-init="panelVisible = true;" class="panel-body" style="padding: 0px;">

        <div class="panel panel-default" style="margin: 0px;">
            <div class="panel-heading" style="padding-top: 0px; padding-bottom: 0px; padding-left: 30px;">
                <toggle-btn enabled="panel1Visible"></toggle-btn>
                Dynamic data
            </div>
            <div ng-show="panel1Visible" ng-init="panel1Visible = true;" class="panel-body" style="padding: 0px;">
                <table class="table table-striped table-bordered" style="padding: 0px; margin: 0px;">
                    <tr ng-show='selected !== undefined'>
                        <td style="width: 150px;">TrackId:</td>
                        <td>{{selected.trackId}}&nbsp;<a href="#" ng-click="filterByMMSI()"><i class="fa fa-filter" aria-hidden="true"></a></i></td>
                    </tr>
                    <tr ng-show='selected.firstctc !== undefined'>
                        <td>First contact:</td>
                        <td>{{cvtTime(selected.firstctc)}}</td>
                    </tr>
                    <tr ng-show='selected.lastctc !== undefined'>
                        <td>Last contact:</td>
                        <td>{{cvtTime(selected.lastctc)}}</td>
                    </tr>
                    <tr ng-show='selected.lat !== undefined && selected.lon !== undefined'>
                        <td>Position:&nbsp;&nbsp;<a href="#" ng-click="recenter()"><i class="fa fa-crosshairs" style="font-size: 24px;vertical-align: middle;"></i></a></td>
                        <td>
                            {{cvtPosition(selected.lat, selected.lon)}} 
                            <br>
                            {{cvtLatitudeToDegMinSec(selected.lat)}}&nbsp;&nbsp;{{cvtLongitudeToDegMinSec(selected.lon)}}
                        </td>
                    </tr>
                    <tr ng-show='selected.lat !== undefined && selected.lon !== undefined'>
                        <td>Route:</td>
                        <td>
                            <a class="label label-primary" target="_blank" href="/track/history/{{selected.trackId}}/route.json">json</a>
                            <a class="label label-primary" target="_blank" href="/track/history/{{selected.trackId}}/route.gpx">gpx</a>
                            <a class="label label-primary" target="_blank" href="/track/history/{{selected.trackId}}/route.geojson">geojson</a>
                        </td>
                    </tr>
                    <tr ng-show='selected.heading !== undefined'>
                        <td>Heading:</td>
                        <td>{{cvtDirection(selected.heading)}}</td>
                    </tr>
                    <tr ng-show='selected.course !== undefined'>
                        <td>Course:</td>
                        <td>{{cvtDirection(selected.course)}}</td>
                    </tr>
                    <tr ng-show='selected.rot !== undefined'>
                        <td>Rate of turn:</td>
                        <td>{{cvtRoteOfTurn(selected.rot)}}</td>
                    </tr>
                    <tr ng-show='selected.speed !== undefined'>
                        <td>Speed:</td>
                        <td>{{cvtSpeed(selected.speed)}}</td>
                    </tr>
                    <tr ng-show='selected.utcTime !== undefined'>
                        <td>UTC Time:</td>
                        <td>{{selected.utcTime}}</td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="panel panel-default" style="margin: 0px;">
            <div class="panel-heading" style="padding-top: 0px; padding-bottom: 0px; padding-left: 30px;">
                <toggle-btn enabled="panel2Visible"></toggle-btn>
                Voyage data
            </div>
            <div ng-show="panel2Visible" ng-init="panel2Visible = false;" class="panel-body" style="padding: 0px;">
                <table class="table table-striped table-bordered" style="padding: 0px; margin: 0px;">
                    <tr ng-show='selected.dest !== undefined'>
                        <td style="width: 150px;">Destination:</td>
                        <td>{{selected.dest}}</td>
                    </tr>
                    <tr ng-show='selected.cargo !== undefined'>
                        <td>Cargo:</td>
                        <td>{{selected.cargoname}}</td>
                    </tr>
                    <tr ng-show='selected.draught !== undefined'>
                        <td>Draught:</td>
                        <td>{{cvtLength(selected.draught)}}</td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="panel panel-default" style="margin: 0px;">
            <div class="panel-heading" style="padding-top: 0px; padding-bottom: 0px; padding-left: 30px;">
                <toggle-btn enabled="panel3Visible"></toggle-btn>
                Static data
            </div>
            <div ng-show="panel3Visible" ng-init="panel3Visible = false;" class="panel-body" style="padding: 0px;">
                <table class="table table-striped table-bordered" style="padding: 0px; margin: 0px;">
                    <tr ng-show='selected.name !== undefined'>
                        <td style="width: 150px;">Name:</td>
                        <td>{{selected.name}}</td>
                    </tr>
                    <tr ng-show='selected.callsign !== undefined'>
                        <td>Callsign:</td>
                        <td>{{selected.callsign}}</td>
                    </tr>
                    <tr ng-show='selected.imo !== undefined'>
                        <td>IMO:</td>
                        <td>{{selected.imo}}</td>
                    </tr>
                    <tr ng-show='cvtDimensions(selected.objlength, selected.objbeam) !== undefined'>
                        <td>Length x Beam:</td>
                        <td>{{cvtDimensions(selected.objlength, selected.objbeam)}}</td>
                    </tr>
                    <tr ng-show='selected.type !== undefined'>
                        <td>Type:</td>
                        <td>{{cvtType(selected.type)}}</td>
                    </tr>
                    <tr ng-show='selected.navdev !== undefined'>
                        <td>Nav.-device:</td>
                        <td>{{selected.navdev}}</td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="panel panel-default" style="margin: 0px;">
            <div class="panel-heading" style="padding-top: 0px; padding-bottom: 0px; padding-left: 30px;">
                <toggle-btn enabled="panel4Visible"></toggle-btn>
                Photos
            </div>
            <div ng-show="panel4Visible" ng-init="panel4Visible = false;" class="panel-body" style="padding: 0px;">
                <div class="row">
                    <div class="col-xs-6 col-md-3" ng-repeat="photo in photos">
                        <a href="#" class="thumbnail" ng-click="clickImage(photo)" data-toggle="modal" data-target="#pictureModal">
                            <img src="/photos/{{photo._id}}" alt="{{photo.filename}}" />
                        </a>
                    </div>
                    <div class="col-xs-6 col-md-3" style="text-align: center;">
                        <div ngf-drop ngf-select ng-model="files" style="background: #F8F8F8;border: 5px dashed #DDD; width: 100%;" 
                             ngf-drag-over-class="'dragover'" ngf-multiple="true" ngf-allow-dir="false"
                             accept="image/*" 
                             ngf-pattern="'image/*'">

                            <i ng-show="!uploading" style="width: 100%;" class="fa fa-3x fa-upload"></i>
                            <i ng-show="uploading" style="width: 100%;" class="fa fa-spinner fa-spin fa-3x fa-fw"></i>
                        </div>
                    </div>

                    <!-- Modal -->
                    <div id="pictureModal" class="modal fade" role="dialog">
                        <div class="modal-dialog">

                            <!-- Modal content-->
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    <h4 class="modal-title">{{selected.name}} &nbsp; {{selected.trackId}}</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-md-12 thumbnail">
                                            <img src="{{photoUrl}}" />
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                </div>
                            </div>

                        </div>
                    </div>        


                </div>
            </div>
        </div>


        <div ng-show="selected.trackId !== undefined" class="well well-sm">
            <a target="_blank" href="http://www.marinetraffic.com/en/ais/details/ships/mmsi:{{selected.trackId}}">MarineTraffic.com</a>
        </div>
    </div>
</div>